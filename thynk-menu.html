<!DOCTYPE html>
<html>
<head>
    <title>Thynk POS - Custom Menu Management</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA8klEQVRYhe2XsQ2DMBBF3yFGYARWYAQ2YAM2cJsNXLqF3MAtbWjpXFLRUsLRcQJHgVQR+ZVlW/fvf/84wP8IVkoJABhjAABCCFhrIaVE27ZJACklaq0BAFprxHGMGGM2QABYV9daa4QQSCkFACilkFJaa5FSwnmPxhgopZBSgojgvUdRFACAruswxlgA3nsYY9B1HaqqAhHBeYuyLNmYUgpN02QDlFIQQqAoCnRdx7quaK1FSinLGmNMVVWdc84VRfHRNI3ruk4qpVx8jzGm6bpu27btA7/QbdsOx3F8rLV/FkIIF3kfQoi+7/cB/4dfAXwCs8+ovQUz5MEAAAAASUVORK5CYII=" type="image/png">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', Arial, sans-serif; background: #f8fafc; }
        
        .header { 
            background: linear-gradient(135deg, #3b82f6, #8b5cf6); 
            color: white; 
            padding: 1rem; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo-container { 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            justify-content: center;
        }
        
        .logo-img { 
            width: 50px; 
            height: 50px; 
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMTAwIiBmaWxsPSIjMzQ4NUZGIi8+CjxwYXRoIGQ9Ik0xMDAgNDBDMTMwIDQwIDEzMCA0MCA1NSA1MEM2MCA0NCA5MCA0MCA4MCA1MEM4MCA4MCA4MCA4MCA4MCA4MEgxMjBDMTIwIDgwIDEyMCA4MCA4MCA4MEM5MCA0MCA5MCA0MCA5MCA0MEMxMDAgNDAgMTAwIDQwIDEwMCA0MFoiIGZpbGw9IndoaXRlIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjQ4IiBmb250LXdlaWdodD0iYm9sZCI+VDwvdGV4dD4KPC9zdmc+') no-repeat center;
            background-size: contain;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(255,255,255,0.2);
        }
        
        .logo-text { 
            font-size: 28px; 
            font-weight: 700; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        
        .tab-container { 
            background: white; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        .tabs { 
            display: flex; 
            background: #f1f5f9; 
            border-bottom: 1px solid #e2e8f0;
        }
        
        .tab { 
            flex: 1; 
            padding: 1rem 2rem; 
            background: none; 
            border: none; 
            cursor: pointer; 
            font-weight: 600; 
            transition: all 0.3s;
            position: relative;
        }
        
        .tab.active { 
            background: white; 
            color: #3b82f6; 
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .tab:hover { 
            background: #e2e8f0; 
        }
        
        .tab.active:hover { 
            background: white; 
        }
        
        .tab-content { 
            padding: 2rem; 
        }
        
        .tab-pane { 
            display: none; 
        }
        
        .tab-pane.active { 
            display: block; 
        }
        
        .btn { 
            background: linear-gradient(135deg, #3b82f6, #2563eb); 
            color: white; 
            border: none; 
            padding: 0.75rem 1.5rem; 
            border-radius: 8px; 
            cursor: pointer; 
            margin: 0.5rem; 
            font-size: 16px; 
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }
        
        .btn-success { 
            background: linear-gradient(135deg, #10b981, #059669); 
        }
        
        .btn-danger { 
            background: linear-gradient(135deg, #ef4444, #dc2626); 
        }
        
        .form-group { 
            margin-bottom: 1.5rem; 
        }
        
        .form-label { 
            display: block; 
            margin-bottom: 0.5rem; 
            font-weight: 600; 
            color: #374151;
        }
        
        .form-input { 
            width: 100%; 
            padding: 0.75rem 1rem; 
            border: 2px solid #e5e7eb; 
            border-radius: 8px; 
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-input:focus { 
            outline: none; 
            border-color: #3b82f6; 
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .menu-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 1.5rem; 
        }
        
        .menu-item { 
            background: white; 
            padding: 1.5rem; 
            border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            border: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
        }
        
        .menu-item:hover { 
            transform: translateY(-5px); 
            border-color: #3b82f6;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .menu-item h3 { 
            color: #1f2937; 
            margin-bottom: 0.5rem; 
            font-size: 1.25rem;
        }
        
        .menu-item p { 
            color: #6b7280; 
            margin-bottom: 1rem; 
        }
        
        .menu-item .price { 
            font-size: 1.5rem; 
            font-weight: 700; 
            color: #10b981; 
            margin-bottom: 1rem;
        }
        
        .menu-item .category { 
            background: #dbeafe; 
            color: #1d4ed8; 
            padding: 0.25rem 0.75rem; 
            border-radius: 20px; 
            font-size: 0.875rem; 
            font-weight: 500;
            display: inline-block;
            margin-bottom: 1rem;
        }
        
        .menu-actions { 
            display: flex; 
            gap: 0.5rem; 
            margin-top: 1rem;
        }
        
        .btn-sm { 
            padding: 0.5rem 1rem; 
            font-size: 0.875rem; 
        }
        
        .storage-info { 
            background: linear-gradient(135deg, #eff6ff, #dbeafe); 
            padding: 1.5rem; 
            border-radius: 12px; 
            border: 2px solid #bfdbfe; 
            margin-bottom: 2rem;
        }
        
        .storage-stats { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
            gap: 1rem; 
            text-align: center;
        }
        
        .stat { 
            background: white; 
            padding: 1rem; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .stat-value { 
            font-size: 2rem; 
            font-weight: 700; 
            color: #3b82f6; 
        }
        
        .stat-label { 
            font-size: 0.875rem; 
            color: #6b7280; 
            font-weight: 500;
        }
        
        .notification { 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: linear-gradient(135deg, #10b981, #059669); 
            color: white; 
            padding: 1rem 1.5rem; 
            border-radius: 12px; 
            z-index: 1000;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }
        
        .empty-state { 
            text-align: center; 
            padding: 3rem; 
            color: #6b7280; 
        }
        
        .empty-state-icon { 
            font-size: 4rem; 
            margin-bottom: 1rem; 
        }
        
        @keyframes slideIn { 
            from { transform: translateX(100%); opacity: 0; } 
            to { transform: translateX(0); opacity: 1; } 
        }
        
        @media (max-width: 768px) {
            .container { padding: 1rem; }
            .menu-grid { grid-template-columns: 1fr; }
            .tabs { flex-direction: column; }
            .storage-stats { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-container">
            <div class="logo-img"></div>
            <div class="logo-text">Thynk POS</div>
        </div>
        <p style="text-align: center; margin-top: 0.5rem; opacity: 0.9; font-size: 0.9rem;">
            ‚úÖ Custom Logo | ‚úÖ Menu Management | ‚úÖ Local Storage | ‚úÖ Offline Ready
        </p>
    </div>

    <div class="container">
        <div class="storage-info">
            <h3 style="margin-bottom: 1rem; color: #1f2937;">üìä Restaurant Data Storage</h3>
            <div class="storage-stats" id="storageStats">
                <div class="stat">
                    <div class="stat-value" id="menuCount">0</div>
                    <div class="stat-label">Menu Items</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="orderCount">0</div>
                    <div class="stat-label">Orders</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="customerCount">0</div>
                    <div class="stat-label">Customers</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="storageSize">0KB</div>
                    <div class="stat-label">Storage Used</div>
                </div>
            </div>
        </div>

        <div class="tab-container">
            <div class="tabs">
                <button class="tab active" onclick="showTab('menu')">üçΩÔ∏è Menu Management</button>
                <button class="tab" onclick="showTab('orders')">üßæ Order History</button>
                <button class="tab" onclick="showTab('customers')">üë• Customers</button>
                <button class="tab" onclick="showTab('settings')">‚öôÔ∏è Settings</button>
            </div>

            <div class="tab-content">
                <!-- Menu Management Tab -->
                <div class="tab-pane active" id="menu-tab">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h2>üçΩÔ∏è Menu Management</h2>
                        <button class="btn" onclick="showAddMenuForm()">‚ûï Add Menu Item</button>
                    </div>

                    <!-- Add Menu Form -->
                    <div id="addMenuForm" style="display: none; background: #f8fafc; padding: 2rem; border-radius: 12px; margin-bottom: 2rem; border: 2px dashed #cbd5e1;">
                        <h3 style="margin-bottom: 1.5rem; color: #1f2937;">‚ûï Add New Menu Item</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                            <div class="form-group">
                                <label class="form-label">Item Name *</label>
                                <input type="text" class="form-input" id="itemName" placeholder="e.g., Butter Chicken">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Price (‚Çπ) *</label>
                                <input type="number" class="form-input" id="itemPrice" placeholder="320">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Category *</label>
                                <select class="form-input" id="itemCategory">
                                    <option value="">Select Category</option>
                                    <option value="Starters">Starters</option>
                                    <option value="Main Course">Main Course</option>
                                    <option value="Dal">Dal</option>
                                    <option value="Rice">Rice</option>
                                    <option value="Bread">Bread</option>
                                    <option value="Beverages">Beverages</option>
                                    <option value="Desserts">Desserts</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Description</label>
                            <textarea class="form-input" id="itemDescription" rows="3" placeholder="Describe your dish..."></textarea>
                        </div>
                        <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                            <button class="btn btn-success" onclick="saveMenuItem()">üíæ Save Menu Item</button>
                            <button class="btn btn-danger" onclick="hideAddMenuForm()">‚ùå Cancel</button>
                        </div>
                    </div>

                    <!-- Menu Items Display -->
                    <div id="menuItems" class="menu-grid">
                        <div class="empty-state">
                            <div class="empty-state-icon">üçΩÔ∏è</div>
                            <h3>No Menu Items Yet</h3>
                            <p>Click "Add Menu Item" to create your first menu item</p>
                        </div>
                    </div>
                </div>

                <!-- Orders Tab -->
                <div class="tab-pane" id="orders-tab">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h2>üßæ Order History</h2>
                        <button class="btn" onclick="addSampleOrder()">‚ûï Add Sample Order</button>
                    </div>
                    <div id="ordersList">
                        <div class="empty-state">
                            <div class="empty-state-icon">üßæ</div>
                            <h3>No Orders Yet</h3>
                            <p>Orders will appear here as they are created</p>
                        </div>
                    </div>
                </div>

                <!-- Customers Tab -->
                <div class="tab-pane" id="customers-tab">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h2>üë• Customer Database</h2>
                        <button class="btn" onclick="addSampleCustomer()">‚ûï Add Sample Customer</button>
                    </div>
                    <div id="customersList">
                        <div class="empty-state">
                            <div class="empty-state-icon">üë•</div>
                            <h3>No Customers Yet</h3>
                            <p>Customer data will be stored here</p>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-pane" id="settings-tab">
                    <h2 style="margin-bottom: 2rem;">‚öôÔ∏è Restaurant Settings</h2>
                    <div style="display: grid; gap: 2rem;">
                        <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                            <h3 style="margin-bottom: 1rem;">üè™ Restaurant Details</h3>
                            <div class="form-group">
                                <label class="form-label">Restaurant Name</label>
                                <input type="text" class="form-input" id="restaurantName" placeholder="Your Restaurant Name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Address</label>
                                <textarea class="form-input" id="restaurantAddress" rows="3" placeholder="Restaurant Address"></textarea>
                            </div>
                            <button class="btn btn-success" onclick="saveSettings()">üíæ Save Settings</button>
                        </div>
                        
                        <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                            <h3 style="margin-bottom: 1rem;">üíæ Data Management</h3>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button class="btn" onclick="exportData()">üì§ Export All Data</button>
                                <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>
                                <button class="btn" onclick="loadSampleData()">üìÅ Load Sample Data</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ‚úÖ COMPLETE RESTAURANT DATABASE SYSTEM
        const RestaurantDB = {
            // Menu Management
            menu: {
                save: (item) => {
                    const menu = JSON.parse(localStorage.getItem('thynk_menu') || '[]');
                    const newItem = {
                        id: Date.now(),
                        name: item.name,
                        price: parseFloat(item.price),
                        category: item.category,
                        description: item.description || '',
                        created: new Date().toISOString(),
                        available: true
                    };
                    menu.push(newItem);
                    localStorage.setItem('thynk_menu', JSON.stringify(menu));
                    return menu.length;
                },
                getAll: () => JSON.parse(localStorage.getItem('thynk_menu') || '[]'),
                delete: (id) => {
                    const menu = RestaurantDB.menu.getAll().filter(item => item.id !== parseInt(id));
                    localStorage.setItem('thynk_menu', JSON.stringify(menu));
                },
                update: (id, updates) => {
                    const menu = RestaurantDB.menu.getAll();
                    const index = menu.findIndex(item => item.id === parseInt(id));
                    if (index !== -1) {
                        menu[index] = {...menu[index], ...updates};
                        localStorage.setItem('thynk_menu', JSON.stringify(menu));
                    }
                }
            },
            
            // Order Management
            orders: {
                save: (order) => {
                    const orders = JSON.parse(localStorage.getItem('thynk_orders') || '[]');
                    const newOrder = {
                        id: Date.now(),
                        table: order.table || Math.floor(Math.random() * 20) + 1,
                        items: order.items || [],
                        total: order.total || 0,
                        status: order.status || 'Completed',
                        created: new Date().toISOString()
                    };
                    orders.push(newOrder);
                    localStorage.setItem('thynk_orders', JSON.stringify(orders));
                    return orders.length;
                },
                getAll: () => JSON.parse(localStorage.getItem('thynk_orders') || '[]'),
                delete: (id) => {
                    const orders = RestaurantDB.orders.getAll().filter(order => order.id !== parseInt(id));
                    localStorage.setItem('thynk_orders', JSON.stringify(orders));
                }
            },
            
            // Customer Management
            customers: {
                save: (customer) => {
                    const customers = JSON.parse(localStorage.getItem('thynk_customers') || '[]');
                    const newCustomer = {
                        id: Date.now(),
                        name: customer.name,
                        phone: customer.phone || '',
                        email: customer.email || '',
                        visits: customer.visits || 1,
                        created: new Date().toISOString()
                    };
                    customers.push(newCustomer);
                    localStorage.setItem('thynk_customers', JSON.stringify(customers));
                    return customers.length;
                },
                getAll: () => JSON.parse(localStorage.getItem('thynk_customers') || '[]'),
                delete: (id) => {
                    const customers = RestaurantDB.customers.getAll().filter(customer => customer.id !== parseInt(id));
                    localStorage.setItem('thynk_customers', JSON.stringify(customers));
                }
            },
            
            // Settings
            settings: {
                save: (settings) => {
                    localStorage.setItem('thynk_settings', JSON.stringify(settings));
                },
                get: () => JSON.parse(localStorage.getItem('thynk_settings') || '{}')
            },
            
            // Export all data
            exportAll: () => ({
                menu: RestaurantDB.menu.getAll(),
                orders: RestaurantDB.orders.getAll(),
                customers: RestaurantDB.customers.getAll(),
                settings: RestaurantDB.settings.get(),
                exported: new Date().toISOString()
            }),
            
            // Clear all data
            clearAll: () => {
                localStorage.removeItem('thynk_menu');
                localStorage.removeItem('thynk_orders');
                localStorage.removeItem('thynk_customers');
                localStorage.removeItem('thynk_settings');
            }
        };

        // ‚úÖ UI FUNCTIONS
        let currentTab = 'menu';

        function showTab(tabName) {
            // Hide all tab panes
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab pane
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Add active class to selected tab
            event.target.classList.add('active');
            
            currentTab = tabName;
            
            // Load content for the tab
            if (tabName === 'menu') loadMenuItems();
            if (tabName === 'orders') loadOrders();
            if (tabName === 'customers') loadCustomers();
            
            updateStorageStats();
        }

        // ‚úÖ MENU MANAGEMENT FUNCTIONS
        function showAddMenuForm() {
            document.getElementById('addMenuForm').style.display = 'block';
            document.getElementById('itemName').focus();
        }

        function hideAddMenuForm() {
            document.getElementById('addMenuForm').style.display = 'none';
            clearMenuForm();
        }

        function clearMenuForm() {
            document.getElementById('itemName').value = '';
            document.getElementById('itemPrice').value = '';
            document.getElementById('itemCategory').value = '';
            document.getElementById('itemDescription').value = '';
        }

        function saveMenuItem() {
            const name = document.getElementById('itemName').value.trim();
            const price = document.getElementById('itemPrice').value.trim();
            const category = document.getElementById('itemCategory').value;
            const description = document.getElementById('itemDescription').value.trim();

            if (!name || !price || !category) {
                showNotification('‚ùå Please fill in all required fields (Name, Price, Category)', 'error');
                return;
            }

            if (parseFloat(price) <= 0) {
                showNotification('‚ùå Price must be greater than 0', 'error');
                return;
            }

            const count = RestaurantDB.menu.save({
                name,
                price,
                category,
                description
            });

            showNotification(`‚úÖ "${name}" added to menu! Total items: ${count}`, 'success');
            hideAddMenuForm();
            loadMenuItems();
            updateStorageStats();
        }

        function loadMenuItems() {
            const menuItems = RestaurantDB.menu.getAll();
            const container = document.getElementById('menuItems');
            
            if (menuItems.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üçΩÔ∏è</div>
                        <h3>No Menu Items Yet</h3>
                        <p>Click "Add Menu Item" to create your first menu item</p>
                        <button class="btn" onclick="showAddMenuForm()" style="margin-top: 1rem;">‚ûï Add Your First Item</button>
                    </div>
                `;
                return;
            }

            container.innerHTML = menuItems.map(item => `
                <div class="menu-item">
                    <div class="category">${item.category}</div>
                    <h3>${item.name}</h3>
                    <p>${item.description || 'No description available'}</p>
                    <div class="price">‚Çπ${item.price.toFixed(2)}</div>
                    <div style="font-size: 0.875rem; color: #6b7280; margin-bottom: 1rem;">
                        Added: ${new Date(item.created).toLocaleDateString()}
                    </div>
                    <div class="menu-actions">
                        <button class="btn btn-sm btn-success" onclick="editMenuItem(${item.id})">‚úèÔ∏è Edit</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteMenuItem(${item.id}, '${item.name}')">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteMenuItem(id, name) {
            if (confirm(`Are you sure you want to delete "${name}" from the menu?`)) {
                RestaurantDB.menu.delete(id);
                showNotification(`‚úÖ "${name}" deleted from menu`, 'success');
                loadMenuItems();
                updateStorageStats();
            }
        }

        function editMenuItem(id) {
            const menu = RestaurantDB.menu.getAll();
            const item = menu.find(item => item.id === id);
            if (!item) return;

            document.getElementById('itemName').value = item.name;
            document.getElementById('itemPrice').value = item.price;
            document.getElementById('itemCategory').value = item.category;
            document.getElementById('itemDescription').value = item.description;
            
            showAddMenuForm();
            
            // Replace save button temporarily
            const saveBtn = document.querySelector('#addMenuForm .btn-success');
            const originalOnClick = saveBtn.onclick;
            saveBtn.textContent = 'üíæ Update Item';
            saveBtn.onclick = () => {
                updateMenuItem(id, originalOnClick);
            };
        }

        function updateMenuItem(id, originalOnClick) {
            const name = document.getElementById('itemName').value.trim();
            const price = document.getElementById('itemPrice').value.trim();
            const category = document.getElementById('itemCategory').value;
            const description = document.getElementById('itemDescription').value.trim();

            if (!name || !price || !category) {
                showNotification('‚ùå Please fill in all required fields', 'error');
                return;
            }

            RestaurantDB.menu.update(id, { name, price: parseFloat(price), category, description });
            showNotification(`‚úÖ "${name}" updated successfully!`, 'success');
            
            // Reset save button
            const saveBtn = document.querySelector('#addMenuForm .btn-success');
            saveBtn.textContent = 'üíæ Save Menu Item';
            saveBtn.onclick = originalOnClick;
            
            hideAddMenuForm();
            loadMenuItems();
            updateStorageStats();
        }

        // ‚úÖ OTHER FUNCTIONS
        function loadOrders() {
            const orders = RestaurantDB.orders.getAll();
            const container = document.getElementById('ordersList');
            
            if (orders.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üßæ</div>
                        <h3>No Orders Yet</h3>
                        <p>Orders will appear here as they are created</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = `<div class="menu-grid">${orders.map(order => `
                <div class="menu-item">
                    <h3>Order #${order.id.toString().slice(-6)}</h3>
                    <p>Table: ${order.table} | Status: ${order.status}</p>
                    <div class="price">‚Çπ${order.total.toFixed(2)}</div>
                    <p style="font-size: 0.875rem; color: #6b7280;">
                        ${new Date(order.created).toLocaleString()}
                    </p>
                    <div class="menu-actions">
                        <button class="btn btn-sm btn-danger" onclick="deleteOrder(${order.id})">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('')}</div>`;
        }

        function loadCustomers() {
            const customers = RestaurantDB.customers.getAll();
            const container = document.getElementById('customersList');
            
            if (customers.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üë•</div>
                        <h3>No Customers Yet</h3>
                        <p>Customer data will be stored here</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = `<div class="menu-grid">${customers.map(customer => `
                <div class="menu-item">
                    <h3>${customer.name}</h3>
                    <p>Phone: ${customer.phone || 'N/A'}</p>
                    <p>Email: ${customer.email || 'N/A'}</p>
                    <p>Visits: ${customer.visits}</p>
                    <p style="font-size: 0.875rem; color: #6b7280;">
                        Joined: ${new Date(customer.created).toLocaleDateString()}
                    </p>
                    <div class="menu-actions">
                        <button class="btn btn-sm btn-danger" onclick="deleteCustomer(${customer.id})">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('')}</div>`;
        }

        function addSampleOrder() {
            const count = RestaurantDB.orders.save({
                table: Math.floor(Math.random() * 20) + 1,
                total: Math.floor(Math.random() * 1000) + 200,
                status: ['Completed', 'Pending', 'Preparing'][Math.floor(Math.random() * 3)],
                items: Math.floor(Math.random() * 5) + 1
            });
            showNotification(`‚úÖ Sample order added! Total orders: ${count}`, 'success');
            loadOrders();
            updateStorageStats();
        }

        function addSampleCustomer() {
            const names = ['Rajesh Kumar', 'Priya Sharma', 'Amit Singh', 'Neha Gupta', 'Ravi Patel'];
            const randomName = names[Math.floor(Math.random() * names.length)];
            const count = RestaurantDB.customers.save({
                name: randomName,
                phone: '+91' + Math.floor(Math.random() * 9000000000 + 1000000000),
                visits: Math.floor(Math.random() * 10) + 1
            });
            showNotification(`‚úÖ ${randomName} added! Total customers: ${count}`, 'success');
            loadCustomers();
            updateStorageStats();
        }

        function deleteOrder(id) {
            RestaurantDB.orders.delete(id);
            showNotification('‚úÖ Order deleted', 'success');
            loadOrders();
            updateStorageStats();
        }

        function deleteCustomer(id) {
            RestaurantDB.customers.delete(id);
            showNotification('‚úÖ Customer deleted', 'success');
            loadCustomers();
            updateStorageStats();
        }

        function saveSettings() {
            const name = document.getElementById('restaurantName').value;
            const address = document.getElementById('restaurantAddress').value;
            
            RestaurantDB.settings.save({ name, address });
            showNotification('‚úÖ Settings saved successfully!', 'success');
        }

        function exportData() {
            const data = RestaurantDB.exportAll();
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `thynk-pos-data-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showNotification('üì§ Data exported successfully!', 'success');
        }

        function clearAllData() {
            if (confirm('‚ö†Ô∏è This will delete ALL data (menu, orders, customers). This cannot be undone. Are you sure?')) {
                RestaurantDB.clearAll();
                showNotification('üóëÔ∏è All data cleared!', 'success');
                loadMenuItems();
                loadOrders();
                loadCustomers();
                updateStorageStats();
            }
        }

        function loadSampleData() {
            // Add sample menu items
            const sampleMenu = [
                { name: 'Butter Chicken', price: 320, category: 'Main Course', description: 'Creamy tomato-based chicken curry' },
                { name: 'Dal Tadka', price: 180, category: 'Dal', description: 'Traditional yellow lentils with spices' },
                { name: 'Garlic Naan', price: 60, category: 'Bread', description: 'Fresh bread with garlic and butter' },
                { name: 'Chicken Biryani', price: 280, category: 'Rice', description: 'Fragrant rice with spiced chicken' },
                { name: 'Paneer Tikka', price: 250, category: 'Starters', description: 'Grilled cottage cheese with spices' }
            ];
            
            sampleMenu.forEach(item => RestaurantDB.menu.save(item));
            
            // Add sample orders
            for (let i = 0; i < 5; i++) {
                RestaurantDB.orders.save({
                    table: Math.floor(Math.random() * 15) + 1,
                    total: Math.floor(Math.random() * 800) + 200,
                    status: 'Completed'
                });
            }
            
            // Add sample customers
            const sampleCustomers = [
                { name: 'Rajesh Kumar', phone: '+919876543210' },
                { name: 'Priya Sharma', phone: '+919876543211' },
                { name: 'Amit Singh', phone: '+919876543212' }
            ];
            
            sampleCustomers.forEach(customer => RestaurantDB.customers.save(customer));
            
            showNotification('üìÅ Sample data loaded successfully!', 'success');
            loadMenuItems();
            loadOrders();
            loadCustomers();
            updateStorageStats();
        }

        function updateStorageStats() {
            const menu = RestaurantDB.menu.getAll();
            const orders = RestaurantDB.orders.getAll();
            const customers = RestaurantDB.customers.getAll();
            const totalData = JSON.stringify(RestaurantDB.exportAll());
            
            document.getElementById('menuCount').textContent = menu.length;
            document.getElementById('orderCount').textContent = orders.length;
            document.getElementById('customerCount').textContent = customers.length;
            document.getElementById('storageSize').textContent = (totalData.length / 1024).toFixed(1) + 'KB';
        }

        function showNotification(message, type = 'success') {
            // Remove existing notifications
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            if (type === 'error') {
                notification.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
            }
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        // ‚úÖ INITIALIZE APP
        document.addEventListener('DOMContentLoaded', () => {
            updateStorageStats();
            loadMenuItems();
            
            // Load saved settings
            const settings = RestaurantDB.settings.get();
            if (settings.name) {
                document.getElementById('restaurantName').value = settings.name;
            }
            if (settings.address) {
                document.getElementById('restaurantAddress').value = settings.address;
            }
            
            showNotification('üéâ Thynk POS loaded! Your custom logo and menu system are ready.', 'success');
        });
    </script>
</body>
</html>
